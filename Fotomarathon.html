<!DOCTYPE html>
<html>
<head>
  <style>
    button { padding:10px 20px; margin:5px; font-size:16px; }
    #startTimerBtn.active { background-color: #4CAF50; color:white; }
    #pauseBtn.active { background-color: #4CAF50; color:white; }
    button.disabled { background-color: #999; color:#666; }
  </style>
</head>
<body>

<div>
  <div id="timerDisplay">75:00</div>
  <div id="pauseTimerDisplay"></div>
</div>

<button id="startTimerBtn">Starta Timer</button>
<button id="pauseBtn">Pausa Timer</button>

<script>
const timerDisplay = document.getElementById('timerDisplay');
const pauseTimerDisplay = document.getElementById('pauseTimerDisplay');
const startBtn = document.getElementById('startTimerBtn');
const pauseBtn = document.getElementById('pauseBtn');

let totalDuration = 75*60; // i sekunder
let pauseDuration = 10*60; // i sekunder
let mainTimer, pauseTimer;

function formatTime(seconds){ 
  const m=Math.floor(seconds/60), s=seconds%60; 
  return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`; 
}

function updateButtons(state){
  // state = "initial", "running", "paused"
  switch(state){
    case "initial":
      startBtn.disabled = false; startBtn.className="active";
      pauseBtn.disabled = true; pauseBtn.className="disabled";
      window.removeEventListener("beforeunload", blockReload);
      break;
    case "running":
      startBtn.disabled = true; startBtn.className="disabled";
      pauseBtn.disabled = false; pauseBtn.className="active";
      window.addEventListener("beforeunload", blockReload);
      break;
    case "paused":
      startBtn.disabled = true; startBtn.className="disabled";
      pauseBtn.disabled = true; pauseBtn.className="disabled";
      window.addEventListener("beforeunload", blockReload);
      break;
  }
}

function blockReload(e){
  e.preventDefault();
  e.returnValue = "Timer pågår!";
}

function startMainTimer(){
  updateButtons("running");
  let remaining = totalDuration;
  timerDisplay.innerText = formatTime(remaining);

  clearInterval(mainTimer);
  mainTimer = setInterval(()=>{
    remaining--;
    timerDisplay.innerText = formatTime(remaining);
    if(remaining <= 0){
      clearInterval(mainTimer);
      resetToStart();
    }
  },1000);
}

function startPause(){
  updateButtons("paused");
  clearInterval(mainTimer);

  let remaining = pauseDuration;
  pauseTimerDisplay.innerText = "Paus " + formatTime(remaining);

  clearInterval(pauseTimer);
  pauseTimer = setInterval(()=>{
    remaining--;
    pauseTimerDisplay.innerText = "Paus " + formatTime(remaining);
    if(remaining <= 0){
      clearInterval(pauseTimer);
      pauseTimerDisplay.innerText = "";
      startMainTimer();
    }
  },1000);
}

function resetToStart(){
  updateButtons("initial");
  timerDisplay.innerText = formatTime(totalDuration);
  pauseTimerDisplay.innerText = "";
}

startBtn.addEventListener('click', startMainTimer);
pauseBtn.addEventListener('click', startPause);

// Initial status vid sidstart
window.addEventListener('load', resetToStart);
</script>

</body>
</html>
